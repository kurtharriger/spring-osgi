<?xml version="1.0" encoding="UTF-8"?>

<blueprint xmlns="http://www.osgi.org/xmlns/blueprint/v1.0.0"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
		http://www.osgi.org/xmlns/blueprint/v1.0.0 http://www.osgi.org/xmlns/blueprint/v1.0.0/blueprint.xsd">

	<description>Exporter configuration</description>


	<bean id="listener"
		class="org.springframework.osgi.blueprint.ExporterListener" />

	<bean id="map" class="java.util.LinkedHashMap" />

	<service id="simple" ref="map" interface="java.util.Map"
		ranking="123">
		<service-properties>
			<entry key="fat" value="lip" />
			<entry key="mountain" value="song" />
		</service-properties>
	</service>

	<service id="nested" auto-export="all-classes">
		<interfaces>
			<value>java.util.Map</value>
			<value>java.io.Serializable</value>
		</interfaces>

		<registration-listener registration-method="up"
			unregistration-method="down">
			<ref component="listener" />
		</registration-listener>

		<registration-listener registration-method="up"
			unregistration-method="down">
			<bean
				class="org.springframework.osgi.blueprint.ExporterListener" />
		</registration-listener>

		<bean class="java.util.LinkedHashMap" />
	</service>
</blueprint>