<?xml version="1.0" encoding="UTF-8"?>
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>org.springframework.osgi.rfc124.ri</groupId>
  <version>2.0.0-m1-SNAPSHOT</version>
  <artifactId>uber</artifactId>
  <packaging>jar</packaging>
  <name>Spring OSGi RFC 124 RI: Uber Bundle</name>
  <url>http://www.springframework.org/osgi</url>
  
  <description>
    Spring/OSGi Blueprint Uber Bundle.
  </description>


  <properties>
    <!-- Spring version -->
    <spring.maven.artifact.version>3.0.0.BUILD-SNAPSHOT</spring.maven.artifact.version>
    <spring.base.version>3.0.0</spring.base.version>

	
    <!--- Spring OSGi packages imported version (respect the OSGi naming pattern)-->
    <spring.osgi.import.version>2.0.0.m1</spring.osgi.import.version>
    
    <!--- Spring OSGi packages exported version -->
    <spring.osgi.export.version>2.0.0.m1</spring.osgi.export.version>
    <spring.osgi.bundle.version>2.0.0.m1</spring.osgi.bundle.version>

    <spring.osgi.symbolic.name>
        org.springframework.osgi.blueprint.uber
    </spring.osgi.symbolic.name>

	<spring.osgi.license.loc>../..</spring.osgi.license.loc>

    <javadoc.loc>${basedir}/../../../docs/src/javadoc</javadoc.loc>

    <!-- other properties -->
    <slf4j.version>1.5.6</slf4j.version>
  </properties>
  
  <!-- shared dependencies -->
  <dependencies>
        <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>com.springsource.slf4j.org.apache.commons.logging</artifactId>
          <version>${slf4j.version}</version>
        </dependency>

        <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>com.springsource.slf4j.api</artifactId>
          <version>${slf4j.version}</version>
        </dependency>

        <dependency>
          <groupId>org.slf4j</groupId>
          <artifactId>com.springsource.slf4j.log4j</artifactId>
          <version>${slf4j.version}</version>
        </dependency>

        <dependency>
          <groupId>org.apache.log4j</groupId>
          <artifactId>com.springsource.org.apache.log4j</artifactId>
          <version>1.2.15</version>
        </dependency>

        <dependency>  
            <groupId>net.sourceforge.cglib</groupId>
            <artifactId>com.springsource.net.sf.cglib</artifactId>  
            <version>2.1.3</version>
        </dependency>
        
        <dependency>
            <groupId>org.springframework.osgi</groupId>
            <artifactId>spring-osgi-core</artifactId>
            <version>${pom.version}</version>
        </dependency>
        
        <dependency>
            <groupId>org.springframework.osgi</groupId>
            <artifactId>spring-osgi-extender</artifactId>
            <version>${pom.version}</version>            
        </dependency>
        <dependency>
            <groupId>org.springframework.osgi</groupId>
            <artifactId>spring-osgi-io</artifactId>
            <version>${pom.version}</version>            
        </dependency>
        
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>org.springframework.test</artifactId>
            <version>${spring.maven.artifact.version}</version>            
        </dependency>
                
        <dependency>
            <groupId>org.springframework.osgi.rfc124</groupId>
            <artifactId>api</artifactId>
            <scope>provided</scope>
            <version>${pom.version}</version>
        </dependency>
        <dependency>
            <groupId>org.junit</groupId>
            <artifactId>com.springsource.org.junit</artifactId>
            <version>4.5.0</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.apache.felix</groupId>
            <artifactId>org.osgi.compendium</artifactId>
            <version>1.0.1</version>
            <scope>provided</scope>
        </dependency>        
  </dependencies>

  	<build>
		<plugins>
			<plugin>
				<artifactId>maven-assembly-plugin</artifactId>
				<version>2.2-beta-2</version>
				<inherited>false</inherited>
				<executions>
					<execution>
						<id>uber-jar</id>
						<phase>package</phase>
						<goals><goal>single</goal></goals>
						<configuration>
							<appendAssemblyId>false</appendAssemblyId>
							<descriptors>
								<descriptor>src/assembly/uber.xml</descriptor>
							</descriptors>
						</configuration>
					</execution>
                </executions>					
			</plugin>
			
            <plugin>
                <groupId>com.springsource.bundlor</groupId>
                <artifactId>com.springsource.bundlor.maven</artifactId>
                <version>1.0.0.M4</version>
                <inherited>false</inherited>
                <executions>
                  <execution>
                    <id>bundlor-uber</id>
                    <phase>package</phase>
                    <goals>
                       <goal>transform</goal>
                    </goals>
                  </execution>
                </executions>
                <configuration>
                    <manifestTemplatePath>${basedir}/template.mf</manifestTemplatePath>
                    <manifestHeaders><![CDATA[Bundle-Name: ${pom.artifactId}
Bundle-Version: ${spring.osgi.bundle.version}
Bundle-SymbolicName: ${spring.osgi.symbolic.name}
Bundle-Vendor: SpringSource
Bundle-DocURL: http://www.springframework.org/osgi
Bundle-Description: ${pom.description}
Bundle-License: http://www.apache.org/licenses/LICENSE-2.0
Bundle-ManifestVersion: 2
Implementation-Title: Spring Dynamic Modules Framework
Implementation-Version: ${pom.version}
Implementation-Vendor: SpringSource
Implementation-Vendor-Id: org.springframework.osgi
Spring-DM-Version: ${pom.version}
Spring-Version: ${spring.maven.artifact.version}
Build-Plan: ${env.buildPlan}
Build-Number: ${env.buildNumber}
SVN-Revision: ${env.svnRevision}
Ignored-Existing-Headers: 
 Ant-Version,
 Archiver-Version,
 Unversioned-Imports,
 Tool,
 Ignore-Package,
 Private-Package,
 Created-By,
 Bnd-LastModified,
 Import-Package
Export-Package: 
 org.springframework.beans;version=${spring.base.version},
 org.springframework.beans.factory;version=${spring.base.version},
 org.springframework.beans.factory.config;version=${spring.base.version},
 org.springframework.beans.factory.support;version=${spring.base.version},
 org.springframework.beans.factory.xml;version=${spring.base.version},
 org.springframework.context;version=${spring.base.version},
 org.springframework.core;version=${spring.base.version},
 org.springframework.core.io;version=${spring.base.version},
 org.springframework.core.io.support;version=${spring.base.version},
 org.springframework.osgi.context;version=${spring.osgi.import.version},
 org.springframework.osgi.context.support;version=${spring.osgi.import.version},
 org.springframework.osgi.io;version=${spring.osgi.import.version},
 org.springframework.osgi.util;version=${spring.osgi.import.version},
 org.springframework.test;version=${spring.base.version},
 org.springframework.util;version=${spring.base.version},
 org.springframework.util.xml;version=${spring.base.version}
]]>
                    </manifestHeaders>
                    <packagings>
                       <packaging>jar</packaging>
                    </packagings>
                    <failOnWarnings>false</failOnWarnings>
                    <removeNullHeaders>true</removeNullHeaders>
                </configuration>
          </plugin>			
		</plugins>
	</build>  

</project>